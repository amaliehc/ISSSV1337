---
title: "Group 5 Report"
author: "ISSSV1337 Group 5"
date: "`r Sys.Date()`"
output:
  pdf_document: 
    toc: true
  html_document: default
---

```{r Setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, error = FALSE, message = FALSE, out.width = "100%")
```

# Introduction

This report describes the group's approach to the problem statement and
our findings. First, the problem statement is presented, then the
brainstorming and data collection processes are elaborated, before data
description and findings are presented. Lastly, limitations and steps
forward, as well as a summary of our experience.


## Problem statement

The project chosen for our group was Oslo Philanthropic Exchange (OPX), 
a startup working to develop solutions to assist individuals and 
organizations wanting to donate to charities and designing a socially 
responsible investment strategy.  Their main goal is to increase cash 
flow from private to charitable purposes. Therefore, the donor's trust 
in the charities’ abilities to carry out their promises is significant. 
 
To do this, data from charities need to be collected. OPX’s current 
challenge is the data collection, which must be collected manually today
since the data is unstructured. Therefore, they wanted a way to automate 
the data collection, using web scraping.
 
Additionally, by creating KPIs (Key Performance Indicator), OPX can use 
them to benchmark the relationship between financial assets and emergency 
relief obligations. 
 
The scope of the problem statement was narrowed down to the Nordic 
countries as a starting point. 

It is important to solve this problem because:

1. Creating KPI(s) is important for the organization’s performance 
management, to influence the objective, and to foster growth.

2. Automating the data collection will streamline the work of OPX 
and create more transparency which enhances trust in charities.


# Brainstorming

Our brainstorming process for this case was characterized by several
surprises and turns in the direction of the solution. As we dug deeper
into the solution opportunities, we were also met by new obstacles that
forced us to change course. In particular, there were four turning
points. Therefore, we have decided to divide the brainstorming into
three phases.

### Phase 1: How to harvest and analyze the data? {.smaller}

OPX wanted us to harvest the organizations' financial data from the web.
During the first stage of brainstorming, we wanted to find a simple and
automated way to do so.

We discussed creating a webcrawler that could collect data across
different websites, but quickly decided that this would be too
difficult, and that it would only work with selected organizations. The
suggested solution was to create a code that could read PDF documents
that OPX downloaded themselves. Our code would analyze and organize the
uploaded data from the PDF documents.

However, different organizations publish financial data in different
ways in their yearly reports -- some financial statements were included
as tables, some as pictures, etc. This led us to phase 2.

```{r, echo=FALSE}
knitr::include_graphics("Images/lagret_tekst.png") # må finne ut av hvordan vi deler disse bildene

# inkluder en med årsregnskapet som pdf her
```


### Phase 2: Exploring solutions {.smaller}

At this stage, we wanted to explore alternatives to analyzing PDF
documents. We discussed how to do so, and concluded that we had three
options: 
- Financial statements in yearly report PDF documents. 
- Webscrape Proff.no for financial statements. 
- Webscrape the Brønnøysund registry.

We divided the task among ourselves to explore whether these solutions
were feasible or not. The first option of using PDF documents still had
the issue of financial statements not always being published as text.
Also, we quickly found that Proff.no disallowed webscraping on their
website. The Brønnøysund registry did store downloadable XML documents
of all the financial statements on their website, but we discovered that
access to these files cost about half a million NOK.

We started to look at workarounds for this problem. It would still be
possible to download Proff.no HTML websites manually for each
organization. And, we attempted to request a temporary access to the
Brønnøysund registry's XML documents.

```{r}

```


The Brønnøysund registry and Proff.no had different divisions of
accounting items than the ones OPX wanted. We found that we needed to
create an item path from the webpage items to the OPX items, and we
attempted to do so in Excel at first, so that we later could code this
into R. While doing so, we realized that it would be practically
impossible to extract the correct sums for the OPX accounting items from
the Brønnøysund items. This was e.g. because OPX had split the operating
income into public and private contributions, while the Brønnøysund
registry and Proff.no had not.

```{r, echo=FALSE}
knitr::include_graphics("Images/info_kreft.png")
knitr::include_graphics("Images/regnskapssti.png")
```

When also discovering that not all organizations publish their financial
statements, and certainly not for every year, we decided to give up on
collecting financial data for OPX. This is when we moved on to the third
and final stage.

### Phase 3: Scrapping the scraping {.smaller}

The OPX case requested two tasks -- webscrape financial data, and create
KPIs. During phase three, we scrapped all ideas and progress from the
first two stages, and focused on creating KPIs.

We divided amongst ourselves that some would find useful KPIs from best
practices, while someone else found the accounting items in the OPX
structure that were needed in the calculations. Then, we coded the KPI
calculations into R.

In order to create a somewhat more challenging task for ourselves, we
also decided to create a shiny app that OPX could use, which would
display the KPIs as well as financial trends for the selected
organization. To use this, OPX needs to gather the financial data
themselves, then upload this into the shiny app as a x document

# Data collection

We wanted to use webscraping to collect the data, so that we could have
automated the data input process. As described, we explored different
potential solutions. We experimented on coding such that data could have
been imported from XML files. However, once we realized that the
financial data was of little ¨use, this experimentation stopped.

As we entered the third phase of brainstorming, we still needed some
example data so that we could test our KPI codes. For this, we used the
financial data that OPX had already gathered from different
organizations and organized into useful accounting items.

We copied these financial statements manually into an Excel document.
Perhaps a "simple" solution, however our code requires OPX to import
both an Excel document themselves into shiny, as well as a HTML document
from Proff.no.

If OPX wishes to develop our solution, we recommend that they purchase
API access from the Brønnøysund registry and/or Proff.no. They also need
to create e.g. a simple SQL database with its own data that can be used
by R.

# Data description


# Findings

## KPIs and visualisations

### Key Performance Indicators

On the basis of such data as we could gather we developed five potential KPIs:

- **Fundraising ROI**:
  - A basic measure of the return on investment of direct fundraising expenses: 
  
  $$\frac{\text{private contributions} + \text{membership fees} - \text{fundraising expenses}}{\text{fundraising expenses}} \times 100$$
  
This KPI is not a true measure of fundraising ROI, as it only includes (as we understand OPX's data) the direct fundraising expenses, and does not include major indirect expenses such as salary costs.

***

- **Liquid assets/obligations**:
  - A measure of the relationship between the organisation's liquid assets and its obligations:
  
  $$\frac{\text{private contributions} + \text{investment income} + \text{cash in bank and cash equivalents}}{\text{short term grants payable} + \text{revocable endowments} + \text{long term grants payable}} \times 100$$
  
This KPI was suggested by OPX.

***

- **Private donations growth**:
  - A calculation of the percentage change in private contributions based on the two most recent years:
  
  $$\frac{\text{private contributions}_2 - \text{private contributions}_1}{\text{private contributions}_1}\times 100$$

***

- **Public grants growth**:
  - A calculation of the percentage change in public grants received based on the two most recent years:
  
$$\frac{\text{public grants}_2 - \text{public grants}_1}{\text{public grants}_1} \times 100$$

***

- **Private/public proportion**:
  - Calculates the percentage of non-commercial or activity-based income that is derived from private contributions and membership fees as opposed to public grants:
  
$$\frac{\text{private contributions} + \text{membership fees}}{\text{public grants} + \text{private contributions} + \text{membership fees}} \times 100$$

This KPI may say something about the NGO's sources of funding. There are prima facie no specific desirable funding mix, but this measure may be of interest to some donors.

***

### Visualisations

The dashboard includes five plots, three based on data from Proff.no and two based on data from the Excel sheet.

-   **Net income/loss**: Based on the entry *Årsresultat* in the Proff.no data.
-   **Total equity/liabilities**: Based on the entry *Sum egenkapital og gjeld* in the Proff.no data.
-   **Revenues**: Based on the category *Revenue* in the Excel sheet.
-   **Expenses**: Based on the category *Expenses* in the Excel sheet.
-   **CEO compensation**: Based on the category *Lederlønn* in the Proff.no data. Not in thousands. Includes the entries *Lønn* and *Leder annen godtgjørelse*.
    -   This appears to increasingly be treated as a necessary measure of transparency and performance, but the values should normally be evaluated in the context of the size of the NGO and the sector(s) within which it operates.

The plots based on data from Proff.no often demonstrate surprising lacunae, but it difficult to know where they originate -- NGO reporting, Brønnøysund, or Proff.no.

# Limitations and steps forward

During the case we realized that we had to limit our solution. The case 
presented by OPX wanted an automated code which would retrieve the data 
and calculate the different KPIs, which turned out not to be possible. 
The limitations can be divided into problems regarding: 
(i) the accessible data, and 
(ii) the non-accessible data
 
The limitation with the accessible data is first and foremost the lack 
of relevant data in the annual reports from the NGOs.  Since there is 
no obligation to provide annual accounts, they often have more information 
about the organization in general rather than numbers. If they do provide 
the annual accounts, they are not standardized. This means that different 
NGOs do not have an established template for what the different posts in 
the annual accounts should contain. 

Also, these annual reports themselves appear in different formats. If they 
do appear in the same format, the accounts we want to retrieve are often 
in an image format rather than text. The lack of data, standardization and 
diverse formats made it impossible to create an automated solution for 
collecting data based on the NGOs’ annual reports. 

The limitation with the non-accessible data is that the data OPX needs to 
calculate the different KPIs do not exist in the annual reports.  We 
experimented with an annual report from Brønnøysundregisteret. Although 
the reports were standardized, the different posts in the report did not 
match the template from OPX. Additionally the data that OPX is interested 
in and which is necessary for calculating the relevant KPIs are not 
available.   

Also, with limited experience with KPIs it was hard to sort out which ones 
that would be of relevance and not. After examining the different 
alternatives, we concluded that the NGOs could report in a standardized 
excel document from which our code retrieves the data to calculate the KPIs.

In addition, we looked at the draft of a new law on associations from 
2021 by the Ministry of Trade, Industries, and Fisheries, to see if it 
contained changes in the laws regarding annual reports, which would have 
made the data needed available in the future. This turned out to be a dead 
end, as the draft focused largely on smaller and local associations and 
contained no changes in reporting obligations. Therefore, if this law were 
to be implemented, it would not be of any relevance to OPX. As a result, 
due to OPX’s need for this data to be available, we recommend discussions 
with relevant politicians and ministry officials as a starting point.

Based on the findings of working with this case, we would recommend looking 
at best practices for further development. One good example could be charity 
navigator. 


# Our experience



